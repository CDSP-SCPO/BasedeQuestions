var luceneQueryValidator={translate:{},wildcardCaseInsensitive:true,alertUser:true,stemming:true,init:function(a){if(a.translate){this.translate=a.translate}if(a.wildcardCaseInsensitive){this.wildcardCaseInsensitive=a.wildcardCaseInsensitive}if(a.alertUser){this.alertUser=a.alertUser}if(a.stemming){this.stemming=a.stemming}return this},setWildcardCaseInsensitive:function(a){this.wildcardCaseInsensitive=a},setAlertUser:function(a){this.alertUser=a},checkQuery:function(a){return this._checkQueryValue(a)},_checkQueryValue:function(b){if(b!==null&&b.length>0){b=this._removeEscapes(b);if(!this._checkAllowedCharacters(b)){return false}if(!this._checkAsterisk(b)){return false}if(!this._checkAmpersands(b)){return false}if(!this._checkPipe(b)){return false}if(!this._checkCaret(b)){return false}if(!this._checkSquiggle(b)){return false}if(!this._checkQuestionMark(b)){return false}if(!this._checkParentheses(b)){return false}if(!this._checkPlusMinusExclamationMarkNOT(b)){return false}if(!this._checkANDORNOT(b)){return false}if(!this._checkQuotes(b)){return false}if(this.wildcardCaseInsensitive){if(b.indexOf("*")!=-1){var a=b.indexOf(":");if(a==-1){b.value=b.toLowerCase()}else{b.value=b.substring(0,a)+b.substring(a).toLowerCase()}}}return true}},_removeEscapes:function(a){return a.replace(/\\./g,"")},_checkAllowedCharacters:function(a){matches=a.match(/[:]/);if(matches!==null&&matches.length>0){if(this.alertUser){alert(this.translate.allowedCharacters)}return false}return true},_checkAsterisk:function(a){var b;if(!this.stemming){matches=a.match(/^\*|[^\\]\*/);b=this.translate.asterisk}else{matches=a.match(/^[\*]+$|[\s]\*|^\*[^\s]/);b=this.translate.asteriskSt}if(matches!==null){if(this.alertUser){alert(b)}return false}return true},_checkAmpersands:function(a){matches=a.match(/[&]{2}/);if(matches!==null&&matches.length>0){matches=a.match(/([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?|{}\[\]\^~\\@#\/$%'=]+&*)+(\s+&&\s+)?([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?|!{}\[\]\^~\\@#\/$%'=]+&*)+/);if(matches===null){if(this.alertUser){alert(this.translate.ampersands)}return false}}return true},_checkPipe:function(a){matches=a.match(/[|]{2}/);if(matches!==null&&matches.length>0){matches=a.match(/([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?&{}\[\]\^~\\@#\/$%'=]+\|*)+(\s+\|\|\s+)?([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?&!{}\[\]\^~\\@#\/$%'=]+\|*)+/);if(matches===null){if(this.alertUser){alert(this.translate.pipe)}return false}}return true},_checkCaret:function(a){matches=a.match(/[^\\]\^(?![\s]*[0-9].?[0-9]*)|[^\\]\^$|^\^/);if(matches!==null){if(this.alertUser){alert(this.translate.caret)}return false}return true},_checkSquiggle:function(b){var a=true,c;if(b.match(/^~|[^\\]~/)){if(!this.stemming){matches=b.match(/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\&{}\[\]\^\\@#\/$%'=]+\s*~0\.[5-9]/);if(matches===null){a=false;matches=b.match(/\"([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\?&{}\[\]\^\\@#\/$%'=]+\s*){2,}\"\s*~[0-9]+/);if(matches===null){a=false}else{a=true}}}else{matches=b.match(/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\&{}\[\]\^\\@#\/$%'=]+\s*~0\.[5-9]/);if(matches===null){a=false;matches=b.match(/\"([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\?&{}\[\]\^\\@#\/$%'=]+\s*){2,}\"\s*~[0-9]+/);if(matches===null){a=false}else{a=true}}}}if((!a)&&this.alertUser){alert(this.translate.squiggle)}return a},_checkQuestionMark:function(a){if(!this.stemming){matches=a.match(/^\?|[^\\]\?/);if(matches!==null&&matches.length>0){if(this.alertUser){alert(this.translate.questionMark)}return false}return true}else{matches=a.match(/^(\?)|([^àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?&|!{}\[\]\^~\\@#\/$%'=]\?+)/);if(matches!==null){if(this.alertUser){alert(this.translate.questionMarkSt)}return false}return true}},_checkParentheses:function(d){var b=false;var a=false;matchLeft=d.match(/[(]/g);if(matchLeft!==null){b=true}matchRight=d.match(/[)]/g);if(matchRight!==null){a=true}if(b||a){if(b&&!a||a&&!b){if(this.alertUser){alert(this.translate.parentheses1)}return false}else{var c=matchLeft.length+matchRight.length;if((c%2)>0||matchLeft.length!=matchRight.length){if(this.alertUser){alert(this.translate.parentheses1)}return false}}matches=d.match(/\(\s*[^àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9]*\s*\)/);if(matches!==null){if(this.alertUser){alert(this.translate.parentheses2)}return false}}return true},_checkPlusMinusExclamationMarkNOT:function(a){matches=a.match(/^[^\n+\-!]*$|^(\s*[+\-!]?\s*[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_:.()\"*?&|{}\[\]\^~\\@#\/$%'=]+[ ]?)+$/);if(matches===null||matches.length===0){if(this.alertUser){alert(this.translate.plusMinusExclamationMarkNOT)}return false}return true},_checkANDORNOT:function(a){matches=a.match(/AND|OR|NOT/);if(matches!==null&&matches.length>0){matches=a.match(/^([àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?&|!{}\[\]\^~\\@\/#$%'=]+\s*((AND )|(OR ))?[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝa-zA-Z0-9_+\-:.()\"*?&|!{}\[\]\^~\\@\/#$%'=]+[ ]*)+$/);if(matches===null||matches.length===0){if(this.alertUser){alert(this.translate.ANDORNOT)}return false}matches=a.match(/^((AND )|(OR )|(NOT ))|((AND)|(OR)|(NOT))[ ]*$/);if(matches!==null&&matches.length>0){if(this.alertUser){alert(this.translate.ANDORNOT)}return false}}return true},_checkQuotes:function(b){matches=b.match(/\"/g);if(matches!==null&&matches.length>0){var a=matches.length;if((a%2)>0){if(this.alertUser){alert(this.translate.quotes1)}return false}matches=b.match(/""/);if(matches!==null){if(this.alertUser){alert(this.translate.quotes2)}return false}}return true}};