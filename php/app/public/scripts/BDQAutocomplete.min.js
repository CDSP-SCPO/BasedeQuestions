jQuery.fn.BDQAutocomplete=function(e){var l=false,j=this,a=j.closest("form"),h=a.find(".searchQuestion"),i=a.find(".searchModalities"),d=a.find(".searchVariableLabel"),g=e.stemming,f=e.termSeparator,c=e.translate,k=e.acUrl,b;b=a.find("input[type=radio][name=searchLang]:checked").attr("value");$(".radioSearchLang").change(function(){b=a.find("input[type=radio][name=searchLang]:checked").attr("value")});if(!b){b=a.find(".searchLang").val()}this.autocomplete({source:function(o,m){if(!h.attr("checked")&&!i.attr("checked")&&!d.attr("checked")){m([])}var n=k,p="";p+="?terms="+escape(o.term)+f;p+="&searchQuestion=";p+=h.attr("checked")?"1":"0";p+="&searchModalities=";p+=i.attr("checked")?"1":"0";p+="&searchVariableLabel=";p+=d.attr("checked")?"1":"0";p+="&searchLang=";p+=b;n=n+encodeURI(p);$.getJSON(n,function(v){var u=0,r=o.term,q=[],t,s,w;for(u=0;u<v.length;u+=2){t=v[u];s='<span class="label">'+t.substring(0,r.length+(w=(t.match(/\s/)!==null)?1:0))+"<b>"+t.substring(r.length+w,t.length)+"</b></span>";if(v[u+1]>0){s+=' - <span class="results">';if(g){s+=c.atLeast}s+=+v[u+1];s+=c.results;s+=" </span>"}q.push({id:u,label:s,value:t})}m(q)})},max:10,minLength:1,open:function(m,n){l=true;if($.browser.msie&&parseInt($.browser.version,10)<=6){$("#sortSelect").css("visibility","hidden")}},close:function(m,n){l=false;$("#sortSelect").css("visibility","visible");if($.browser.msie&&parseInt($.browser.version,10)==6){$("#sortSelect").css("visibility","visible")}}});$(window).bind("resize",function(){if(l){j.autocomplete("close");j.autocomplete("search")}})};